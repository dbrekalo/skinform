// Skinform plugin -- Damir Brekalo
(function(e,t,n){"use strict";function K(t,n){var u,a,f;if(e[r](t,i))return;u=e(t);a=e[i].defaults;f=null;u.is(s)?f=new Z(t,a[s],n&&n[s]?n[s]:{}):u.is('input[type="checkbox"]')?f=new Y(t,a[o],n&&n[o]?n[o]:{}):u.is('input[type="radio"]')?f=new G(t,a.radio,n&&n.radio?n.radio:{}):u.is('input[type="file"]')&&(f=new Q(t,a.file,n&&n.file?n.file:{}));f&&e[r](t,i,f)}function Q(t,n,r){this[u]=e[a]({},n,r);this[f]=t;this.init()}function G(t,n,r){this[u]=e[a]({},n,r);this[f]=t;this.init()}function Y(t,n,r){this[u]=e[a]({},n,r);this[c]=e(t);this.init()}function Z(t,n,r){this[u]=e[a]({},n,r);this[z]=e(t);this.init()}var r="data",i="skinform",s="select",o="checkbox",u="options",a="extend",f="input",l="prototype",c="$input",h="$el",p='<div class="',d="skin_class",v='">',m="$label",g="appendTo",y="</div>",b="$btn",w="setup_events",E="val",S="trigger",x="check_change",T="addClass",N="removeClass",C="text",k="fileExt",L="offset",A="skinform_",O="$wrap",M="group_selector",_="$elems",D="$labels",P="parent",H="label",B='<label class="',j='"></label>',F="prepend",I="checked",q="toggle_class",R="focus_class",U="class",z="$select",W="option:selected",X="btn-class",V="focused",$=e(t),J=e(n);Q[l]={init:function(){this[c]=e(this[f]);this[h]=e(p+this[u][d]+v);this[m]=e(p+this[u].label_class+v+this[u].label_text+y)[g](this[h]);this[b]=e(p+this[u].btn_class+v+this[u].btn_text+y)[g](this[h]);this[h].insertAfter(this[c]);this[c][g](this[h]);this[w]()},setup_events:function(){var e=this;this[c].on({focus:function(){e[c][r](E,fileInput[E]())},blur:function(){e[c][S](x)},check_change:function(){e[c][E]()&&e[c][E]()!=e[c][r](E)&&e[c][S]("change")},change:function(){var t=e[c][E]().split(/\\/).pop(),n="skin_file_ext_"+t.split(".").pop().toLowerCase();e[m][C](t)[N](e[m][r](k)||"")[T](n)[r](k,n);e[b][C](e[u].btn_change_text)},click:function(){e[c][r](E,e[c][E]());setTimeout(function(){e[c][S](x)},100)}});this[h].on("mousemove",function(t){var n={left:t.pageX-e[h][L]().left-e[c].outerWidth()+20,top:t.pageY-e[h][L]().top-$.scrollTop()-3};e[u].fixed_position&&(n.top=t.pageY-e[h][L]().top-3);e[c].css(n)})}};G[l]={init:function(){var t,n=this;this[c]=e(this[f]);t=this[f].name;if(e[r](this[f],A+t))return;this[O]=this[u][M]?this[c].closest(this[u][M]):this[c].closest("form");this[O].length||(this[O]=e("body"));this[_]=this[O].find('input[name="'+t+'"]');this[D]=e();this[_].each(function(){var i=this,s=e(this),o=s[P]();if(!o.is(H)){o=s.wrap(B+n[u][d]+j)[P]();o[F](i.value)}else o[T](n[u][d]);s.prop(I)&&o[T](n[u][q]);n[D]=n[D].add(o);e[r](i,A+t,n)});this[w]()},setup_events:function(){var t=this;this[_].on({change:function(){t[D][N](t[u][q]);e(this)[P]()[T](t[u][q])},focus:function(){t[D][N](t[u][R]);e(this)[P]()[T](t[u][R])},blur:function(){e(this)[P]()[N](t[u][R])}})}};Y[l]={init:function(){this[h]=this[c][P]();if(!this[h].is(H)){this[h]=this[c].wrap(B+this[u][d]+j)[P]();this[h][F](this[c].attr("value"))}else this[h][T](this[u][d]);this[c].prop(I)&&this[h][T](this[u][q]);this[c][r](U)&&this[h][T](this[c][r](U));this[w]()},setup_events:function(){var e=this;e[c].on({change:function(){e[h].toggleClass(e[u][q])},focus:function(){e[h][T](e[u][R])},blur:function(){e[h][N](e[u][R])}})}};Z[l]={init:function(){this[h]=this[z].wrap(p+this[u][d]+'" />')[P]();this[b]=e('<span class="'+this[u].btn_class+v+this[z].find(W)[C]()+"</span>");this[h][F](this[b]);this[z][r](U)&&this[h][T](this[z][r](U));this[z][r](X)&&this[b][T](this[z][r](X));this[w]()},setup_events:function(){var e=this;this[z].on({focus:function(){e[h][T](e[u][R])},blur:function(){e[h][N](e[u][R])},change:function(){e[b][C](e[z].find(W)[C]())}})}};e[i]={};e.fn[i]=function(e){return this.each(function(){K(this,e)})};e[i].defaults={select:{skin_class:"skin_select",btn_class:"btn",focus_class:V},checkbox:{skin_class:"skin_checkbox",toggle_class:"on",focus_class:V},radio:{skin_class:"skin_radio",toggle_class:"on",focus_class:V,group_selector:null},file:{skin_class:"skin_file",btn_class:"skin_file_btn",label_class:"skin_file_label",btn_text:"Odaberi",btn_change_text:"Promijeni",label_text:"Odaberite datoteku"}}})(jQuery,window,document);